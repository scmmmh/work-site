{% extends "page.html" %}
{% block content %}
  {{ super() }}
  <section class="publications grid-x">
    <ul class="cell small-12 medium-9 large-10">
      {% set years = [] %}
      {% for group in publications[page.publications]|sort(attribute='fields.year', reverse=True) %}
        {% if group.fields.get('year', 0) not in years %}
          {% do years.append(group.fields.get('year', 0)) %}
          <li id="publication-{{ group.fields.get('year', 0) }}">{{ group.fields.get('year', 0) }}
            <ul>
              {% for pub in publications[page.publications] if pub.fields.get('year', 0) == group.fields.get('year', 0) %}
                <li>
                  {%if pub.fields.get('pdf', None) %}<a href="{{ SITEURL }}/publications/{{ pub.fields.get('pdf') }}"><svg class="icon pdf"><use href="{{ SITEURL }}/{{ THEME_STATIC_DIR }}/css/icons.svg#pdf"></use></svg></a>{% endif %}
                  {%if pub.fields.get('doi', None) %}<a href="https://dx.doi.org/{{ pub.fields.get('doi') }}"><svg class="icon link"><use href="{{ SITEURL }}/{{ THEME_STATIC_DIR }}/css/icons.svg#external-link"></use></svg></a>{% endif %}
                  {{ pub.fields.get('rendered') }}
                </li>
              {% endfor %}
            </ul>
          </li>
        {% endif %}
      {% endfor %}
    </ul>
    <div class="cell hide-for-small-only medium-3 large-2">
      <nav>
        <ul class="menu vertical align-right">
          {% for year in years %}
            <li><a href="#publication-{{ year }}">{{ year }}</a></li>
          {% endfor %}
        </ul>
      </nav>
    </div>
  </section>
{% endblock %}
